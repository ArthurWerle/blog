---
import { Octokit } from "octokit"

const octokit = new Octokit({ 
  auth: import.meta.env.PUBLIC_GH_TOKEN,
})

const response = await octokit.request("GET /users/{username}/repos", {
  username: "ArthurWerle",
  sort: "created",
  headers: {
    'X-GitHub-Api-Version': '2022-11-28'
  }
})

const reposToDisplay = response?.data?.slice(0, 3) || []

console.log({ reposToDisplay })

if (!reposToDisplay) return null
// const { showReviews } = Astro.props
---

<section>
  <h2 class="text-2xl font-dela text-[#c97f2a]">
    Thing I'm building lately
  </h2>

  <ul class="mt-3 flex flex-col gap-4">
    {
      reposToDisplay.map((repo) => (
        <a href={repo.html_url} class="flex transition-transform duration-200 hover:scale-[1.01]" target="_blank">
          <div>
            <h3 class="font-dela text-xl">{repo.name}</h3>
            {repo.description ? (<p class="font-instrument text-lg">{repo.description}</p>) : null}
          </div>
        </a>
      ))
    }
  </ul>
</section>
